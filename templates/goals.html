{% extends "base.html" %}
{% block content %}
<h3>Savings Goals</h3>

<form method="POST" class="mb-4">
    <input type="text" name="name" placeholder="Goal Name" class="form-control mb-2" required>
    <input type="number" name="target" step="0.01" placeholder="Target Amount" class="form-control mb-2" required>
    <button type="submit" class="btn btn-primary">Create Goal</button>
</form>

{% for goal in goals %}
<div class="row align-items-center mb-3 p-3 border rounded">
    <div class="col">
        <h6 class="mb-1">{{ goal.name }}</h6>
        <p class="mb-1 text-muted">${{ '%.2f' | format(goal.saved_amount) }} / ${{ '%.2f' | format(goal.target_amount)
            }}</p>
        <div class="progress mb-3" style="height: 16px;">
            <div class="progress-bar bg-info"
                style="width: {{ (goal.saved_amount / goal.target_amount * 100) | round(1) }}%;">
                {{ (goal.saved_amount / goal.target_amount * 100) | round(1) }}%
            </div>
        </div>

        <div class="row g-2 align-items-center">
            <div class="col-md-8">
                <form method="POST" action="{{ url_for('add_saving', goal_id=goal.id) }}" class="d-flex">
                    <input type="number" name="amount" step="0.01" class="form-control me-2" placeholder="Add amount"
                        required>
                    <button type="submit" class="btn btn-sm btn-success">âž• Add</button>
                </form>
            </div>
            <div class="col-md-4 text-end">
                <form method="POST" action="{{ url_for('delete_goal', goal_id=goal.id) }}">
                    <button type="submit" class="btn btn-sm btn-outline-danger">ðŸ—‘ Remove</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% else %}
<p>No goals yet.</p>
{% endfor %}
{% endblock %}