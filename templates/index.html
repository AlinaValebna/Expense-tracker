{% extends "base.html" %}
{% block content %}
  <a href="{{ url_for('add_expense') }}" class="btn btn-primary mb-3">Add Expense</a>
  <a href="{{ url_for('monthly_summary') }}" class="btn btn-outline-info">View Monthly Summary</a>
  <h4>Total: ${{ total }}</h4>
  <form method="get" action="{{ url_for('index') }}" class="mb-3">
    <label for="category">Filter by Category:</label>
    <select name="category" id="category" onchange="this.form.submit()" class="form-select w-auto d-inline-block ms-2">
      <option value="All">All</option>
      {% for category in categories %}
        <option value="{{ category }}" {% if selected == category %}selected{% endif %}>{{ category }}</option>
      {% endfor %}
    </select>
  </form>
  
  <ul class="list-group mt-3">
    {% for expense in expenses %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>${{ expense.amount }}</strong> - {{ expense.description }} ({{ expense.category }})
      </div>
      <div class="d-flex align-items-center gap-2">
        <small class="text-muted">{{ expense.date.strftime('%Y-%m-%d') }}</small>
        <a href="{{ url_for('delete_expense', expense_id=expense.id) }}" class="btn btn-sm btn-danger">Delete</a>
      </div>
    </li>    
    {% endfor %}
  </ul>
{% endblock %}
